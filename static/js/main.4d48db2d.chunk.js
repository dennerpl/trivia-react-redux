(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},110:function(e,t,a){e.exports=a(216)},119:function(e,t,a){},121:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},133:function(e,t){},135:function(e,t){},169:function(e,t){},170:function(e,t){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),c=a.n(s),i=a(12),o=a(19),l=a(26),u=a(105),m=a(22),p={LOGIN_INFO:"LOGIN_INFO",IS_FETCHING:"IS_FETCHING",REQUEST_SUCCESS:"REQUEST_SUCCESS",REQUEST_TOKEN_SUCCESS:"REQUEST_TOKEN_SUCCESS",SCORE_UPDATE:"SCORE_UPDATE",RESET_SCORE:"RESET_SCORE",SAVE_TIMER:"SAVE_TIMER",SAVE_PICTURE:"SAVE_PICTURE"},d={name:"",assertions:0,score:0,gravatarEmail:"",tokenString:"",picture:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.LOGIN_INFO:return Object(m.a)({},e,{name:t.payload.name,gravatarEmail:t.payload.email});case p.REQUEST_TOKEN_SUCCESS:return Object(m.a)({},e,{tokenString:t.token});case p.SCORE_UPDATE:return Object(m.a)({},e,{score:e.score+t.payload,assertions:e.assertions+1});case p.RESET_SCORE:return Object(m.a)({},e,{score:0,assertions:0});case p.SAVE_PICTURE:return Object(m.a)({},e,{picture:t.payload});default:return e}},b={questions:{},isLoading:!1,timer:0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.IS_FETCHING:return Object(m.a)({},e,{isLoading:!0});case p.REQUEST_SUCCESS:return Object(m.a)({},e,{questions:t.questions,isLoading:!1});case p.SAVE_TIMER:return Object(m.a)({},e,{timer:t.payload});default:return e}},f=Object(l.c)({player:E,game:h}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,g=Object(l.e)(f,v(Object(l.a)(u.a))),y=(a(119),a(27)),O=a(14),S=a.n(O),k=a(46),j=a(5),C=a(6),N=a(8),T=a(7),w=a(10),_=a(9),I=function(){var e,t;return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,S.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},x=function(e){var t,a,n;return S.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t="https://opentdb.com/api.php?amount=5&token=".concat(e),r.next=3,S.a.awrap(fetch(t));case 3:return a=r.sent,r.next=6,S.a.awrap(a.json());case 6:return n=r.sent,r.abrupt("return",n);case 8:case"end":return r.stop()}}))},R=function(e){return{type:p.REQUEST_SUCCESS,questions:e}};var U=a(106),A=a.n(U),q=(a(121),function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(N.a)(this,Object(T.a)(t).call(this))).state={name:"",email:""},e.isValid=e.isValid.bind(Object(w.a)(e)),e.handleChange=e.handleChange.bind(Object(w.a)(e)),e.handleClick=e.handleClick.bind(Object(w.a)(e)),e}return Object(_.a)(t,e),Object(C.a)(t,[{key:"isValid",value:function(){var e=this.state,t=e.name,a=e.email;return""===t||!/\S+@\S+\.\S+/.test(a)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(k.a)({},a,n))}},{key:"handleClick",value:function(){var e,t,a,n,r,s,c,i,o;return S.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.state,t=e.name,a=e.email,n=this.props,r=n.sendLogin,s=n.requestToken,c=n.requestQuestions,r({name:t,email:a}),l.next=5,S.a.awrap(I());case 5:i=l.sent,o=i.token,s(o),localStorage.setItem("token",o),c(o);case 10:case"end":return l.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email;return r.a.createElement("div",{className:"login-page"},r.a.createElement("img",{src:A.a,className:"App-logo",alt:"logo"}),r.a.createElement("div",{className:"flex-parent"},r.a.createElement("form",{className:"input-container"},r.a.createElement("input",{type:"text",name:"name",className:"login-input",value:t,autoComplete:"off",placeholder:"Nome","data-testid":"input-player-name",onChange:this.handleChange}),r.a.createElement("input",{type:"email",name:"email",autoComplete:"off",className:"login-input",value:a,placeholder:"E-mail","data-testid":"input-gravatar-email",onChange:this.handleChange})),r.a.createElement("div",{className:"login-links-container"},r.a.createElement(o.b,{to:"/game"},r.a.createElement("button",{type:"button",className:"login-buttons",disabled:this.isValid(),"data-testid":"btn-play",onClick:this.handleClick},"Play")),r.a.createElement(o.b,{to:"/settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"login-buttons"},"Settings")),r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking",className:"login-buttons"},"Ranking")))))}}]),t}(n.Component)),L=Object(i.b)(null,(function(e){return{sendLogin:function(t){return e({type:p.LOGIN_INFO,payload:t})},requestToken:function(t){return e({type:p.REQUEST_TOKEN_SUCCESS,token:t})},requestQuestions:function(t){return e((a=t,function(e){var t;return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:p.IS_FETCHING}),n.next=3,S.a.awrap(x(a));case 3:t=n.sent,e(R(t));case 5:case"end":return n.stop()}}))}));var a}}}))(q),Q=function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-go-home",className:"login-buttons button-home"},"Home"))}}]),t}(n.Component),P=(a(123),function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.index,n=t.name,s=t.score,c=t.picture;return r.a.createElement("li",{key:a,className:"ranking-item"},r.a.createElement("div",null,r.a.createElement("img",{src:c,alt:"player",className:"profile-picture picture-ranking"})),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"player-name-".concat(a),className:"player-name"},n),r.a.createElement("p",{"data-testid":"player-score-".concat(a)},s," ","points")))}}]),t}(n.Component)),V=(a(124),function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(N.a)(this,Object(T.a)(t).call(this))).state={timer:30},e.reloadTimer=e.reloadTimer.bind(Object(w.a)(e)),e}return Object(_.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.reloadTimer,1e3)}},{key:"reloadTimer",value:function(){var e=this.state.timer,t=this.props.answerColor;e>0?this.setState((function(e){return{timer:e.timer-1}}),this.checkIfAnswered):(t(),this.setState({timer:30}))}},{key:"checkIfAnswered",value:function(){var e=this.state.timer,t=this.props,a=t.resetTimer,n=t.restoreTimer,r=t.saveTime;a&&(r(e),this.setState({timer:30},n))}},{key:"render",value:function(){var e=this.state.timer;return r.a.createElement("div",{className:"timer"},"Remaining time:"," ",e)}}]),t}(n.Component)),D=Object(i.b)(null,(function(e){return{saveTime:function(t){return e({type:p.SAVE_TIMER,payload:t})}}}))(V),F=(a(125),function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"settings-page"},r.a.createElement("h1",{"data-testid":"settings-title",className:"page-title"},"Settings"),r.a.createElement(Q,null))}}]),t}(n.Component));var H=function(){return null===localStorage.getItem("ranking")&&localStorage.setItem("ranking","[]"),JSON.parse(localStorage.getItem("ranking"))},M=(a(126),function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t={name:e.name,score:e.score,picture:e.picture},a=H();a.push(t),localStorage.setItem("ranking",JSON.stringify(a))}},{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"feedback-page"},r.a.createElement("p",{"data-testid":"feedback-text",className:"feedback-text"},t>=3?"Well done!":"Try again"),r.a.createElement("div",{className:"score-container"},r.a.createElement("p",null,"Final Score:"," ",r.a.createElement("span",{"data-testid":"feedback-total-score",className:"final-score"},a)),r.a.createElement("p",null,"Correct Answers:"," ",r.a.createElement("span",{"data-testid":"feedback-total-question",className:"correct-answers"},t))),r.a.createElement("div",{className:"feedback-links-container"},r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-play-again",type:"button",className:"feedback-buttons"},"Play Again")),r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",className:"feedback-buttons"},"Ranking"))))}}]),t}(n.Component)),B=Object(i.b)((function(e){return{assertions:e.player.assertions,score:e.player.score,name:e.player.name,picture:e.player.picture}}))(M),G=a(108),J=a.n(G),K=(a(212),function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(N.a)(this,Object(T.a)(t).call(this))).gravatarHash=e.gravatarHash.bind(Object(w.a)(e)),e}return Object(_.a)(t,e),Object(C.a)(t,[{key:"gravatarHash",value:function(){var e=this.props.gravatarEmail;return J()(e)}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.savePic,s="https://www.gravatar.com/avatar/".concat(this.gravatarHash());return n(s),r.a.createElement("div",{className:"header"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:s,className:"profile-picture",height:"100%",alt:"Avatar"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score",className:"header-score"},a," ","points"))}}]),t}(n.Component)),W=Object(i.b)((function(e){var t=e.player;return{name:t.name,gravatarEmail:t.gravatarEmail,score:t.score}}),(function(e){return{savePic:function(t){return e({type:p.SAVE_PICTURE,payload:t})}}}))(K),X=a(109),z=(a(213),function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(N.a)(this,Object(T.a)(t).call(this))).state={answered:!1,colorCorrect:"",colorIncorrect:"",resetTimer:!1},e.answerColor=e.answerColor.bind(Object(w.a)(e)),e.nextButton=e.nextButton.bind(Object(w.a)(e)),e.restoreTimer=e.restoreTimer.bind(Object(w.a)(e)),e.scoreCalculator=e.scoreCalculator.bind(Object(w.a)(e)),e}return Object(_.a)(t,e),Object(C.a)(t,[{key:"handleClick",value:function(){this.setState({answered:!0})}},{key:"answerColor",value:function(){this.setState({colorIncorrect:"answer-wrong",colorCorrect:"answer-correct",resetTimer:!0}),this.handleClick()}},{key:"nextButton",value:function(){this.setState({answered:!1,colorCorrect:"",colorIncorrect:"",resetTimer:!0})}},{key:"restoreTimer",value:function(){this.setState({resetTimer:!1})}},{key:"scoreCalculator",value:function(){var e=this.props,t=e.difficulty,a=e.timer,n=this.props,r={player:{name:n.name,assertions:n.assertions,score:n.score,gravatarEmail:n.gravatarEmail}};switch(localStorage.setItem("state",JSON.stringify(r)),t){case"easy":return 10+1*a;case"medium":return 10+2*a;default:return 10+3*a}}},{key:"render",value:function(){var e=this,t=this.state,a=t.answered,n=t.colorCorrect,s=t.colorIncorrect,c=t.resetTimer,i=this.props,o=i.results,l=i.nextQuestion,u=i.updateScore,m=o.correct_answer,p=o.incorrect_answers,d=o.question,E=o.category,b=[m].concat(Object(X.a)(p)),h=this.scoreCalculator(),f=b.map((function(e){return b.indexOf(e)})).sort((function(){return Math.random()-.5})).map((function(e){return b[e]}));return r.a.createElement("div",{className:"page-quiz"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"container-quiz"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"container-question-timer"},r.a.createElement("p",{"data-testid":"question-text",className:"question-text"},d),r.a.createElement("p",{"data-testid":"question-category"},E),r.a.createElement("div",{className:"container-timer"},r.a.createElement(D,{answerColor:this.answerColor,nextButton:this.nextButton,resetTimer:c,restoreTimer:this.restoreTimer})))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"container-answers"},f.map((function(t,c){return o=c,(i=t)===m?r.a.createElement("button",{className:" alternative-button ".concat(n),key:o,"data-testid":"correct-answer",type:"button",onClick:function(){e.answerColor(),u(h)},disabled:a},m):r.a.createElement("button",{className:" alternative-button ".concat(s),key:o,"data-testid":"wrong-answer-".concat(o),type:"button",onClick:e.answerColor,disabled:a},i);var i,o}))))),r.a.createElement("div",{className:"btn-next-container"},r.a.createElement("button",{type:"button",className:"btn-next",onClick:function(){e.nextButton(),l()},hidden:!a,"data-testid":"btn-next"},"NEXT"))))}}]),t}(n.Component)),$=Object(i.b)((function(e){var t=e.game.timer,a=e.player;return{timer:t,name:a.name,assertions:a.assertions,score:a.score,gravatarEmail:a.gravatarEmail}}),(function(e){return{updateScore:function(t){return e({type:p.SCORE_UPDATE,payload:t})}}}))(z),Y=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(N.a)(this,Object(T.a)(t).call(this,e))).state={key:0},a.nextQuestion=a.nextQuestion.bind(Object(w.a)(a)),a.createLocalStorage=a.createLocalStorage.bind(Object(w.a)(a)),a}return Object(_.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.createLocalStorage()}},{key:"createLocalStorage",value:function(){var e=this.props,t=e.name,a=e.gravatarEmail;(0,e.resetScoreAssertion)();var n={player:{name:t,assertions:0,score:0,gravatarEmail:a}};localStorage.setItem("state",JSON.stringify(n))}},{key:"nextQuestion",value:function(){var e=this.state.key,t=this.props.history;4===e&&t.push("/feedback"),e<4&&this.setState({key:e+1})}},{key:"render",value:function(){var e=this.state.key,t=this.props,a=t.results;return t.isLoading||void 0===a?r.a.createElement("p",{className:"loader"}):r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement($,{nextQuestion:this.nextQuestion,results:a[e]}))}}]),t}(n.Component),Z=Object(i.b)((function(e){var t=e.game,a=t.isLoading,n=t.questions.results,r=e.player;return{isLoading:a,results:n,name:r.name,assertions:r.assertions,score:r.score,gravatarEmail:r.gravatarEmail}}),(function(e){return{resetScoreAssertion:function(t){return e({type:p.RESET_SCORE})}}}))(Y),ee=(a(214),function(e){function t(){return Object(j.a)(this,t),Object(N.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=H();console.log(e);return 0!==e.length?r.a.createElement("div",{className:"ranking-page"},r.a.createElement("h1",{"data-testid":"ranking-title",className:"page-title"},"Ranking"),r.a.createElement("ul",{className:"ranking-list"},e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement(P,{player:e,key:t,index:t})}))),r.a.createElement(Q,null)):r.a.createElement("div",{className:"ranking-page-empty"},r.a.createElement("h1",{"data-testid":"ranking-title",className:"page-title"},"Ranking"),r.a.createElement("p",{className:"empty-message"},"Nothing yet!"),r.a.createElement(Q,null))}}]),t}(n.Component));a(215);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{basename:"/trivia-react-redux"},r.a.createElement(i.a,{store:g},r.a.createElement((function(){return r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/",component:L}),r.a.createElement(y.a,{path:"/settings",component:F}),r.a.createElement(y.a,{path:"/feedback",component:B}),r.a.createElement(y.a,{path:"/game",component:Z}),r.a.createElement(y.a,{path:"/ranking",component:ee}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[110,1,2]]]);
//# sourceMappingURL=main.4d48db2d.chunk.js.map